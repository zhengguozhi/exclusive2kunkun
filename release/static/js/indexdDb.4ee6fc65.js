(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["indexdDb"],{f26c:function(e,n,t){"use strict";t.r(n);t("c975"),t("a15b"),t("b0c0"),t("ac1f"),t("1276");var o=t("53ca");function r(e){function n(e){e=(e||"_HDC_")+window.location.pathname;var n=window.localStorage||{getItem:function(){return null},setItem:function(){},clear:function(){}};function t(t){var o=n.getItem(e+t);try{return JSON.parse(o)}catch(r){return o}}function o(t,o){try{n.setItem(e+t,JSON.stringify(o))}catch(r){n.setItem(e+t,o)}}function a(){var t=n.length-1;while(t>=0)localStorage.key(t)&&~n.key(t).indexOf(e)&&i(n.key(t),!0),--t}function i(t,o){n.removeItem(o?t:e+t)}return{createTable:function(){},read:t,remove:i,add:o,update:o,clear:a,selectTable:function(e){r.table=e}}}var t={};window.indexedDB||(t=n()),window.localStorage.getItem(window.location.pathname+"_hdc_need_fecth_new_")&&(window._hdc_need_fecth_new_=!0,window.localStorage.removeItem(window.location.pathname+"_hdc_need_fecth_new_"));var r={name:"ey",table:"",version:null};function a(e){console.log("indexedDB:",e)}function i(e){try{var n=r.version?window.indexedDB.open(r.name,r.version):window.indexedDB.open(r.name);n.onupgradeneeded=function(n){a("Upgrading..."),e(n.target.result,(function(){n.target.result.close()}))},n.onsuccess=function(n){a("Success!"),e(n.target.result,(function(){n.target.result.close()}))},n.onerror=function(e){a("Error"),console.dir(e)}}catch(t){e(null)}}var c=window.location.pathname.split("/");c.pop();var u=c.join("/");function l(e){if(null==e)return e;var n=Object(o["a"])(e);return"string"===n?e.indexOf("http")>-1?e:"_HDC_"+u+"/"+e:"object"===n?(e.url=l(e.url),e):void 0}function d(e,n,t){window.indexedDB?(n=n||{keyPath:"url",shema:[]},r.version=Date.now(),i((function(o,a){if(o){var i;if(!o.objectStoreNames.contains(e)&&(i=o.createObjectStore(e,n.keyPath?{keyPath:n.keyPath}:{autoIncrement:!0}),n.shema))for(var c=0;c<n.shema.length;c++)i.createIndex(n.shema[c].name,n.shema[c].name,{unique:!!n.shema[c].unique});r.table=e,a(),t&&t()}else t&&t(!0)}))):t&&t(!0)}function s(e,n){if(e=l(e),!window.indexedDB)return t.set(e.url,e.code),void(n&&n());r.version=null,i((function(t,o){if(t){var i=t.transaction([r.table],"readwrite").objectStore(r.table).add(e);i.onsuccess=function(t){a(e.url+"WS"),o(),n&&n()},i.onerror=function(t){a(e.url+"WE"),o(),n&&n(t)}}else n&&n(!0)}))}function f(e,n){if(window._hdc_need_fecth_new_)n(!0);else if(e=l(e),window.indexedDB)r.version=null,i((function(t,o){if(t){var i=t.transaction([r.table]).objectStore(r.table).get(e);i.onerror=function(e){n&&n(e)},i.onsuccess=function(t){a(e+"RS"),o(),n(!i.result||null,i.result)}}else n&&n(!0)}));else{var o=t.get(e);n&&n(!o||null,o)}}function w(e,n){if(e=l(e),!window.indexedDB)return t.set(e.url,e.code),void(n&&n());r.version=null,i((function(t,o){if(t){var i=t.transaction([r.table],"readwrite").objectStore(r.table).put(e);i.onsuccess=function(t){a(e.url+"US"),o(),n&&n()},i.onerror=function(t){a(e.url+"UE"),o(),n&&n(t)}}else n&&n(!0)}))}function v(e,n){if(e=l(e),!window.indexedDB)return t.rm(e),void(n&&n());r.version=null,i((function(t,o){if(t){var i=t.transaction([r.table],"readwrite").objectStore(r.table).delete(e);i.onsuccess=function(t){a(e+"RMS"),o(),n&&n()}}else n&&n(!0)}))}function b(e,n){i((function(t,o){if(t){var i=l(""),c=t.transaction([r.table],"readwrite").objectStore(r.table),u=c.openCursor(),d=[];u.onsuccess=function(e){var t=e.target.result;if(t)d.push(t.value),t.continue();else{for(var r=0;r<d.length;r++)(n||d[r]&&d[r].url.indexOf(i)>-1)&&c.delete(d[r].url);o()}},u.onerror=function(n){a("clearRE"),o(),e&&e()}}else e&&e(!0)}))}function h(){return r.name=(e||{})["name"]||r.name,r.table=(e||{})["table"]||r.table,{createTable:d,clear:b,read:f,remove:v,add:s,update:w,selectTable:function(e){r.table=e}}}return h()}var a=r,i=a();i.createTable("code",{keyPath:"url"},(function(){i.clear()}))}}]);